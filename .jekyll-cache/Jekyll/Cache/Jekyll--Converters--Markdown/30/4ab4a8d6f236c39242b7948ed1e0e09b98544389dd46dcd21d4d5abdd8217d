I"O2<p align="center">
<img alt="Nef" src="https://raw.githubusercontent.com/bow-swift/nef/develop/assets/header-nef.png" style="width:100%; height:auto;max-width:1080px" />
</p>

<p align="center">
<a href="https://travis-ci.org/bow-swift/nef">
<img src="https://travis-ci.org/bow-swift/nef.svg?branch=develop" />
</a>
<a href="https://github.com/bow-swift/nef">
<img src="https://img.shields.io/badge/platform-iOS%20%7C%20macOS-orange.svg" alt="Platforms" />
</a>
<a href="https://gitter.im/bowswift/bow">
<img src="https://img.shields.io/badge/gitter-nef-blueviolet.svg" alt="Gitter" />
</a>
</p>

<h1 id="nef">nef</h1>

<p><code class="highlighter-rouge">nef</code>, short for <a href="https://en.wikipedia.org/wiki/Nefertiti">Nefertiti</a>, mother of Ankhesenamun, is a command line tool to ease the creation of documentation in the form of Swift Playgrounds. It provides compile-time verification of documentation and exports it in Markdown format that can be consumed by <a href="https://jekyllrb.com/">Jekyll</a> to generate websites.</p>

<p><code class="highlighter-rouge">nef</code> is inspired by <a href="https://github.com/arrow-kt/ank">ŒõNK</a> for Kotlin and <a href="https://github.com/tpolecat/tut">tut</a> for Scala.</p>

<h2 id="-installation">üì• Installation</h2>

<p><code class="highlighter-rouge">nef</code> can be installed using <a href="https://brew.sh">Homebrew</a>. <code class="highlighter-rouge">nef</code> needs Xcode and <a href="https://cocoapods.org">Cocoapods</a> as dependencies. You can run the following command to install <code class="highlighter-rouge">nef</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew tap bow-swift/nef
brew <span class="nb">install </span>nef
</code></pre></div></div>

<p>It will warn you if there is a missing dependency and provide guidance to install it.</p>

<h2 id="-features">üåü Features</h2>

<p><code class="highlighter-rouge">nef</code> highlights the following features:</p>

<ul>
  <li>Eases the creation of Swift Playgrounds with support for third party libraries.</li>
  <li>Compiles Swift Playgrounds with support for third party libraries from the command line.</li>
  <li>Generates Markdown files that can be consumed from Jekyll to create a microsite.</li>
</ul>

<h3 id="-creating-a-swift-playground">üìÉ Creating a Swift Playground</h3>

<p>Swift Playgrounds are a nice tool for prototyping and trying new concepts. However, third party libraries support is a bit cumbersome to add. One of the goals of <code class="highlighter-rouge">nef</code> is to make easier the creation of a Swift Playground with support for one or more libraries.</p>

<p>By default, <code class="highlighter-rouge">nef</code> can create a Swift Playground with support for <a href="http://bow-swift.io">Bow</a>, the Functional Programming companion library for Swift. You can run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nef playground
</code></pre></div></div>

<p>It will create an Xcode project with support for the latest available version of Bow, named <code class="highlighter-rouge">BowPlayground</code>. If you open this Xcode project, you will have a Swift Playground where you can import Bow or any of its modules, and start trying some of its features.</p>

<blockquote>
  <p>Note: You may need to build the project before, in order to be able to use the dependencies in the playground.</p>
</blockquote>

<p>Besides this, you can use the following options with this command:</p>

<ul>
  <li><code class="highlighter-rouge">--name &lt;project&gt;</code>: Specify the name for the Xcode project that you are creating. Example:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nef playground <span class="nt">--name</span> LatestBowProject
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">--bow-version &lt;x.y.z&gt;</code>: Specify the version of Bow that you want to use in the project. This option lets you test an old version of the library in a Swift Playground. Example:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nef playground <span class="nt">--name</span> OldBowProject <span class="nt">--bow-version</span> 0.3.0
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">--bow-branch &lt;branch-name&gt;</code>: Specify the branch of Bow that you want to use in the project. This option lets you test features of Bow that are still in development in a branch that has not been merged or released yet. Example:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nef playground <span class="nt">--name</span> BranchBowProject <span class="nt">--bow-branch</span> master
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">--podfile &lt;Podfile&gt;</code>: Specify a Podfile with your own dependencies. This option lets you create a Playground with support for other libraries. Create a <code class="highlighter-rouge">Podfile</code> listing your dependencies and pass it to <code class="highlighter-rouge">nef</code>. Example:</li>
</ul>

<p>Your <code class="highlighter-rouge">Podfile</code>, located in <code class="highlighter-rouge">./folder/dependencies</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">target</span> <span class="s1">'MyPodsProject'</span> <span class="k">do</span>
  <span class="n">platform</span> <span class="ss">:osx</span><span class="p">,</span> <span class="s1">'10.14'</span>
  <span class="n">use_frameworks!</span>

  <span class="n">pod</span> <span class="s1">'Bow'</span><span class="p">,</span> <span class="s1">'~&gt; 0.3.0'</span>
<span class="k">end</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nef playground <span class="nt">--name</span> MyPodsProject <span class="nt">--podfile</span> ./folder/dependencies/Podfile
</code></pre></div></div>

<p>The last three options are mutually exclusive.</p>

<h3 id="Ô∏è-compiling-a-swift-playground">‚öôÔ∏è Compiling a Swift Playground</h3>

<p>Xcode lets you check for correctness of your Swift Playground and run it. However, compiling a Swift Playground from the command line is not so easy when it has dependencies on third party libraries. This is particularly useful in Continuous Integration, when you want to verify that your playgrounds are not broken when the libraries you depend on are updated. <code class="highlighter-rouge">nef</code> has an option to compile Swift Playgrounds in an Xcode project with dependencies. To do this, you can run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nef compile &lt;path&gt;
</code></pre></div></div>

<p>Where <code class="highlighter-rouge">&lt;path&gt;</code> is the path to the folder where the project and playgrounds are located. You can also clean the result of the compilation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nef clean &lt;path&gt;
</code></pre></div></div>

<h3 id="-generating-markdown-files-for-jekyll">üñ• Generating Markdown files for Jekyll</h3>

<p>Swift Playgrounds let you write comments in Markdown format using the symbols <code class="highlighter-rouge">//:</code> for single line comments, or <code class="highlighter-rouge">/*: */</code> for multiline comments. Inside this comments, you can use any Markdown syntax; an exmaple:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*:
 # This is a heading 1

 This is regular text. *This is bold text*. [This is a link](http://bow-swift.io).
 */</span>
<span class="kd">protocol</span> <span class="kt">MyProtocol</span> <span class="p">{}</span>

<span class="c1">//: ## This is a single line heading 2</span>
</code></pre></div></div>

<p>This makes Swift Playgrounds very suitable to write documentation with compilable examples. Leveraging this, <code class="highlighter-rouge">nef</code> can create Markdown files that can be consumed from Jekyll to generate a microsite. The command to do this is:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nef jekyll <span class="nt">--project</span> &lt;path-to-input&gt; <span class="nt">--output</span> &lt;path-to-output&gt; <span class="nt">--main-page</span> &lt;path-to-index&gt;
</code></pre></div></div>

<p>Options:</p>

<ul>
  <li><code class="highlighter-rouge">--project</code>: Path to the folder containing the Xcode project with Swift Playgrounds.</li>
  <li><code class="highlighter-rouge">--output</code>: Path where the resulting Markdown files will be generated.</li>
  <li><code class="highlighter-rouge">--main-page</code>: Optional. Path to a <code class="highlighter-rouge">README.md</code> file to be used as the index page of the generated microsite.</li>
</ul>

<p><code class="highlighter-rouge">nef</code> finds all the Swift Playgrounds in an Xcode project. Each playground is considered as a section in the generated microsite structure. For each page in a playground, an entry in the corresponding section is created. The page is transformed from Swift to Markdown using the syntax described above. As a result, a directory structure matching the Xcode project structure is generated, together with a <code class="highlighter-rouge">sidebar.yml</code> that can be used as a menu in Jekyll.</p>

<p><code class="highlighter-rouge">nef</code> adds some commands to modify the Markdown transformation process. All <code class="highlighter-rouge">nef</code> commands are included as Swift comments. They begin with <code class="highlighter-rouge">// nef:begin:</code> and end with <code class="highlighter-rouge">// nef:end</code>. The supported commands are:</p>

<ul>
  <li><code class="highlighter-rouge">header</code>: It lets you add metadata to a playground page to be consumed by Jekyll. You must provide the layout that this page will use in Jekyll. The rest of attributes are optional and you may include any of them according to your Jekyll configuration. <code class="highlighter-rouge">nef</code> will take care of the permalinks as well. Example (at the beginning of the playground page):</li>
</ul>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// nef:begin:header</span>
<span class="cm">/*
  layout: docs
*/</span>
<span class="c1">// nef:end</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">hidden</code>: It lets you hide a portion of your playground in the output Markdown file. It is useful to hide imports or supporting utility code to make an example work. Example:</li>
</ul>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// nef:begin:hidden</span>
<span class="kd">import</span> <span class="kt">Bow</span> <span class="c1">// This will be hidden in the Markdown file</span>
<span class="c1">// nef:end</span>

<span class="kd">struct</span> <span class="kt">Person</span> <span class="p">{}</span> <span class="c1">// This will be present in the Markdown file</span>
</code></pre></div></div>

<h2 id="Ô∏è-contributing-to-the-project">‚ù§Ô∏è Contributing to the project</h2>

<p>You can contribute in different ways to make <code class="highlighter-rouge">nef</code> better:</p>

<ul>
  <li>File an issue if you encounter a bug or malfunction in <code class="highlighter-rouge">nef</code>.</li>
  <li>Suggest a new use case or feature for <code class="highlighter-rouge">nef</code>.</li>
  <li>Open a Pull Request fixing a problem or adding new functionality.</li>
  <li>Discuss with us in the <a href="https://gitter.im/bowswift/bow">Gitter channel for Bow</a> about all the above.</li>
</ul>

<h1 id="Ô∏è-license">‚öñÔ∏è License</h1>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Copyright (C) 2019 The nef Authors

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre></div></div>
:ET